<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layout :: layout (~{::title}, ~{::head_css}, ~{::nav_content}, ~{::main_content}, ~{::scripts})}">

<head>
    <title>Lista de Viajes - RUBEN</title>
    <th:block th:fragment="head_css"></th:block>
</head>

<body>

    <th:block th:fragment="nav_content">
        <div th:replace="~{layout :: navbar('viajes')}"></div>
    </th:block>

    <th:block th:fragment="main_content">
        
        <main class="container mt-5 mb-5"> 
            
            <h2 class="text-center mb-4">Viajes Registrados</h2>

            <div class="table-responsive">
                <table class="table table-bordered table-hover align-middle shadow-sm">
                    <thead class="table-dark text-center">
                        <tr>
                            <th>ID</th>
                            <th>Usuario</th>
                            <th>Vehículo</th>
                            <th>Tipo de Viaje</th>
                            <th>Precio</th>
                            <th>Conductor</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr th:each="v : ${listaViajes}">
                            <td th:text="${v.id}"></td>

                            <td th:text="${v.usuario.nombre + ' ' + v.usuario.apellido}"></td>

                            <td th:text="${v.vehiculo.marca + ' ' + v.vehiculo.modelo + ' (' + v.vehiculo.tipo + ')'}"></td>

                            <td th:text="${v.tipoDistancia}"></td>

                            <td th:text="'$' + ${#numbers.formatDecimal(v.precio, 0, 2)}"></td>

                            <td th:text="${v.vehiculo.conductor.nombre + ' ' + v.vehiculo.conductor.apellido}"></td>

                            <td class="text-center">
                                <a th:href="@{'/eliminarViaje/' + ${v.id}}" class="btn btn-danger btn-sm"
                                    onclick="return confirm('¿Eliminar este viaje?');">
                                    <i class="bi bi-trash"></i> Eliminar
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="text-center mt-4">
                <a href="/viaje" class="btn btn-success btn-lg"> Registrar otro Viaje
                </a>
                <a href="/" class="btn btn-secondary btn-lg ms-2"> Volver al Inicio
                </a>
            </div>
            
        </main>

    </th:block>

    <th:block th:fragment="scripts"></th:block>

</body>
</html>
